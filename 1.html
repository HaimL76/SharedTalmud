<html>

<head>
    <script src="jquery-3.6.0.js"></script>
    <script>
        $(document).ready(function() {
            $('#page-image').mousemove(function(e) {
                const left = $("#page-image").position().left;
                const top = $("#page-image").position().top;

                row = e.pageY - top;
                col = e.pageX - left;

                $('#dynamic-status').val(col + ', ' + row);
            });

            $("#page-image").dblclick(function(e) {
                const left = $("#page-image").position().left;
                const top = $("#page-image").position().top;

                row = e.pageY - top;
                col = e.pageX - left;

                $('#static-status').val(col + ', ' + row);

                insert(row, col);
            });

            const insert = function(row, col) {
                //alert("Hello, world!");

                $.ajax({
                    type: "POST",
                    url: `http://localhost:3000/${row}/${col}`,
                    success: function(data) {
                        console.log(data.toString);

                        alert(JSON.stringify(data));
                    }
                });
            };
            /*
                        const canvas = $('#canvi')[0]; // 

                        //canvas.width = 800;
                        //canvas.height = 600;

                        //const canvas = document.getElementById("canvi");

                        const context = canvas.getContext('2d');

                        const image = new Image();

                        image.src = "featured-image-backyard-landscaping.jpeg"; // can also be a remote URL e.g. http://

                        image.onload = function() {
                            canvas.height = image.height;
                            canvas.width = image.width;

                            context.drawImage(image, 0, 0);
                        };
                        */
        })
    </script>
</head>
<style>
    /*
    #page-image {
        position: absolute;
        top: 0px;
        left: 0px;
    }
    
    input[type=text] {
        position: absolute;
        top: 500px;
    }
    */
    
    .super-container {
        display: flex;
        flex-direction: row;
        position: absolute;
        top: 0px;
        left: 0px;
    }
    
    .container {
        display: flex;
        flex-direction: column;
    }
</style>

<body>
    <div class="super-container">
        <input type="text" id="dynamic-status" />
        <input type="text" id="static-status" />

        <div class="container">
            <img id="page-image" src="featured-image-backyard-landscaping.jpeg" alt="featured-image-backyard-landscaping.jpeg">
        </div>
    </div>
    <!--<canvas id="canvi" />-->
</body>

</html>